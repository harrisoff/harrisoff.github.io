(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a0725ae0"],{"23d3":function(t,e,n){"use strict";var i=n("8c3e");n.n(i).a},"5a0c":function(t,e,n){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",i="hour",r="day",a="week",o="month",s="quarter",u="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},f={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(r,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,o),r=e-i<0,a=t.clone().add(n+(r?-1:1),o);return Number(-(n+(e-i)/(r?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:o,y:u,w:a,d:r,D:"date",h:i,m:n,s:e,ms:t,Q:s}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",g={};g[p]=h;var m=function(t){return t instanceof S},$=function(t,e,n){var i;if(!t)return p;if("string"==typeof t)g[t]&&(i=t),e&&(g[t]=e,i=t);else{var r=t.name;g[r]=t,i=r}return!n&&i&&(p=i),i||!n&&p},v=function(t,e,n){if(m(t))return t.clone();var i=e?"string"==typeof e?{format:e,pl:n}:e:{};return i.date=t,new S(i)},y=f;y.l=$,y.i=m,y.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var S=function(){function d(t){this.$L=this.$L||$(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(c);if(i)return n?new Date(Date.UTC(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)):new Date(i[1],i[2]-1,i[3]||1,i[4]||0,i[5]||0,i[6]||0,i[7]||0)}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return y},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return v(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<v(t)},f.$g=function(t,e,n){return y.u(t)?this[e]:this.set(n,t)},f.year=function(t){return this.$g(t,"$y",u)},f.month=function(t){return this.$g(t,"$M",o)},f.day=function(t){return this.$g(t,"$W",r)},f.date=function(t){return this.$g(t,"$D","date")},f.hour=function(t){return this.$g(t,"$H",i)},f.minute=function(t){return this.$g(t,"$m",n)},f.second=function(t){return this.$g(t,"$s",e)},f.millisecond=function(e){return this.$g(e,"$ms",t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,s){var c=this,l=!!y.u(s)||s,d=y.p(t),f=function(t,e){var n=y.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return l?n:n.endOf(r)},h=function(t,e){return y.w(c.toDate()[t].apply(c.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},p=this.$W,g=this.$M,m=this.$D,$="set"+(this.$u?"UTC":"");switch(d){case u:return l?f(1,0):f(31,11);case o:return l?f(1,g):f(0,g+1);case a:var v=this.$locale().weekStart||0,S=(p<v?p+7:p)-v;return f(l?m-S:m+(6-S),g);case r:case"date":return h($+"Hours",0);case i:return h($+"Minutes",1);case n:return h($+"Seconds",2);case e:return h($+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(a,s){var c,l=y.p(a),d="set"+(this.$u?"UTC":""),f=(c={},c.day=d+"Date",c.date=d+"Date",c[o]=d+"Month",c[u]=d+"FullYear",c[i]=d+"Hours",c[n]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[l],h=l===r?this.$D+(s-this.$W):s;if(l===o||l===u){var p=this.clone().set("date",1);p.$d[f](h),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else f&&this.$d[f](h);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[y.p(t)]()},f.add=function(t,s){var c,l=this;t=Number(t);var d=y.p(s),f=function(e){var n=v(l);return y.w(n.date(n.date()+Math.round(e*t)),l)};if(d===o)return this.set(o,this.$M+t);if(d===u)return this.set(u,this.$y+t);if(d===r)return f(1);if(d===a)return f(7);var h=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[d]||1,p=this.$d.getTime()+t*h;return y.w(p,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=y.z(this),r=this.$locale(),a=this.$H,o=this.$m,s=this.$M,u=r.weekdays,c=r.months,d=function(t,i,r,a){return t&&(t[i]||t(e,n))||r[i].substr(0,a)},f=function(t){return y.s(a%12||12,t,"0")},h=r.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:y.s(s+1,2,"0"),MMM:d(r.monthsShort,s,c,3),MMMM:c[s]||c(this,n),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:d(r.weekdaysMin,this.$W,u,2),ddd:d(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:y.s(a,2,"0"),h:f(1),hh:f(2),a:h(a,o,!0),A:h(a,o,!1),m:String(o),mm:y.s(o,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:i};return n.replace(l,(function(t,e){return e||p[t]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,r,c){var l,d=y.p(r),f=v(t),h=6e4*(f.utcOffset()-this.utcOffset()),p=this-f,g=y.m(this,f);return g=(l={},l[u]=g/12,l[o]=g,l[s]=g/3,l[a]=(p-h)/6048e5,l.day=(p-h)/864e5,l[i]=p/36e5,l[n]=p/6e4,l[e]=p/1e3,l)[d]||p,c?g:y.a(g)},f.daysInMonth=function(){return this.endOf(o).$D},f.$locale=function(){return g[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=$(t,e,!0);return i&&(n.$L=i),n},f.clone=function(){return y.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}();return v.prototype=S.prototype,v.extend=function(t,e){return t(e,S,v),v},v.locale=$,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=g[p],v.Ls=g,v}()},"8c3e":function(t,e,n){},"920e":function(t,e,n){"use strict";n.r(e),n("99af"),n("d81d"),n("d3b7");var i=n("054a"),r=(n("9d15"),n("ed08")),a=n("2277"),o=n("a1bc"),s={wx_devtools:"IDE",wx_client:"小程序",wx_http:"HTTP API",wx_unknown:"未知",scf:"云函数"},u={1e3:"其他",1001:"发现栏小程序主入口，「最近使用」列表",1005:"微信首页顶部搜索框的搜索结果页",1006:"发现栏小程序主入口搜索框的搜索结果页",1007:"单人聊天会话中的小程序消息卡片",1008:"群聊会话中的小程序消息卡片",1011:"扫描二维码",1012:"长按图片识别二维码",1013:"扫描手机相册中选取的二维码",1014:"小程序模板消息",1017:"前往小程序体验版的入口页",1019:"微信钱包",1020:"公众号 profile 页相关小程序列表（已废弃）",1022:"聊天顶部置顶小程序入口",1023:"安卓系统桌面图标",1024:"小程序 profile 页",1025:"扫描一维码",1026:"发现栏小程序主入口，「附近的小程序」列表",1027:"微信首页顶部搜索框搜索结果页「使用过的小程序」列表",1028:"我的卡包",1029:"小程序中的卡券详情页",1030:"自动化测试下打开小程序",1031:"长按图片识别一维码",1032:"扫描手机相册中选取的一维码",1034:"微信支付完成页",1035:"公众号自定义菜单",1036:"App 分享消息卡片",1037:"小程序打开小程序",1038:"从另一个小程序返回",1039:"摇电视",1042:"添加好友搜索框的搜索结果页",1043:"公众号模板消息",1044:"带 shareTicket 的小程序消息卡片",1045:"朋友圈广告",1046:"朋友圈广告详情页",1047:"扫描小程序码",1048:"长按图片识别小程序码",1049:"扫描手机相册中选取的小程序码",1052:"卡券的适用门店列表",1053:"搜一搜的结果页",1054:"顶部搜索框小程序快捷入口",1056:"聊天顶部音乐播放器右上角菜单",1057:"钱包中的银行卡详情页",1058:"公众号文章",1059:"体验版小程序绑定邀请页",1064:"微信首页连Wi-Fi状态栏",1067:"公众号文章广告",1068:"附近小程序列表广告（已废弃）",1069:"移动应用",1071:"钱包中的银行卡列表页",1072:"二维码收款页面",1073:"客服消息列表下发的小程序消息卡片",1074:"公众号会话下发的小程序消息卡片",1077:"摇周边",1078:"微信连Wi-Fi成功提示页",1079:"微信游戏中心",1081:"客服消息下发的文字链",1082:"公众号会话下发的文字链",1084:"朋友圈广告原生页",1088:"会话中查看系统消息，打开小程序",1089:"微信聊天主界面下拉，「最近使用」栏",1090:"长按小程序右上角菜单唤出最近使用历史",1091:"公众号文章商品卡片",1092:"城市服务入口",1095:"小程序广告组件",1096:"聊天记录，打开小程序",1097:"微信支付签约原生页，打开小程序",1099:"页面内嵌插件",1102:"公众号 profile 页服务预览",1103:"发现栏小程序主入口，「我的小程序」列表",1104:"微信聊天主界面下拉，「我的小程序」栏",1106:"聊天主界面下拉，从顶部搜索结果页，打开小程序",1107:"订阅消息，打开小程序",1113:"安卓手机负一屏，打开小程序（三星）",1114:"安卓手机侧边栏，打开小程序（三星）",1124:"扫“一物一码”打开小程序",1125:"长按图片识别“一物一码”",1126:"扫描手机相册中选取的“一物一码”",1129:"微信爬虫访问",1131:"浮窗打开小程序",1135:"小程序资料页打开小程序",1146:"地理位置信息打开出行类小程序",1148:"卡包-交通卡，打开小程序",1150:"扫一扫商品条码结果页打开小程序",1153:"“识物”结果页打开小程序"},c={user:{login:"冷启动",article:{add:"新增缓存",update:"更新缓存",old:"使用缓存"},cache:"删除缓存",random:{song:"随机歌曲",article:"随机文章",image:"随机图片"},search:"搜索",comment:"评论"},miniApi:{getUserInfo:"获取用户信息",authSetting:"获取授权信息",backgroundAudioManager:"播放背景音乐",setStorageSync:"setStorageSync",getStorageSync:"getStorageSync"},auto:{cache:"自动清理缓存"}},l={},d={name:"",components:{},filters:{},mixins:[],props:[],data:function(){return{logTypeMap:c,errorTypeMap:l,logList:[],pageSize:50,currentPage:1,total:0,isLoading:!1}},computed:{},watch:{},beforeCreate:function(){},created:function(){var t,e=this;(t="\n  db.collection('".concat(o.COLLECTIONS.LOG,"').aggregate()\n  .lookup({\n    from: '").concat(o.COLLECTIONS.USER,"',\n    localField: 'open_id',\n    foreignField: 'open_id',\n    as: 'user',\n  })\n  .count('total')\n  .end()\n  "),new Promise((function(e,n){Object(i.b)(t).then((function(t){var n=t.data;if(n.length){var i=Object(a.e)(n)[0].total;i=Object(a.b)(i),e(i)}else e(0)})).catch(n)}))).then((function(t){e.total=t})).catch(this.$error),this.getLogList()},mounted:function(){},beforeUpdate:function(){},methods:{getLogList:function(){var t,e,n,c=this;this.isLoading=!0,(t=this.currentPage,e=this.pageSize,n="\n  db.collection('".concat(o.COLLECTIONS.LOG,"').aggregate()\n  .lookup({\n    from: '").concat(o.COLLECTIONS.USER,"',\n    localField: 'open_id',\n    foreignField: 'open_id',\n    as: 'user',\n  })\n  .sort({\n    timestamp: -1\n  })\n  .skip(").concat((t-1)*e,")\n  .limit(").concat(e,")\n  .end()\n  "),new Promise((function(t,e){Object(i.b)(n).then((function(e){var n=e.data,i=Object(a.e)(n).map((function(t){var e=t.open_id,n=t.level,i=t.type,o=t.sub_type,c=t._id,l=t.context,d=t.data,f=Object(a.a)(t.timestamp),h=t.user[0];if("login"===o){var p=d,g=p.params,m=p.systemInfo,$=Object(a.b)(g.scene),v=u[$],y=m.SDKVersion,S=m.batteryLevel,b=m.brand,M=m.locationEnabled,_=m.model,w=m.notificationAlertAuthorized,O=m.notificationAuthorized,D=m.notificationBadgeAuthorized,L=m.notificationSoundAuthorized,T=m.platform,k=m.system,C=m.version,A=m.wifiEnabled;d={scene:v,sdk:y,battery:S=S&&Object(a.b)(S),brand:b,location:M,model:_,notificationAlertAuthorized:w,notificationAuthorized:O,notificationBadgeAuthorized:D,notificationSoundAuthorized:L,os:T,osVersion:k,wxVersion:C,wifi:A}}return l&&(l.source=s[l.SOURCE]),{context:l,openId:e,level:n,type:i,subType:o,nickName:h&&h.nickName,avatarUrl:h&&h.avatarUrl,timestamp:f,time:Object(r.a)(f),data:d,id:c}}));t(i)})).catch(e)}))).then((function(t){c.logList=t})).catch(this.$error).then((function(t){c.isLoading=!1}))},handleSizeChange:function(t){this.pageSize=t,this.getLogList()},handleCurrentChange:function(t){this.currentPage=t,this.getLogList()}}},f=(n("23d3"),n("2877")),h=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view-logs-overview"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{data:t.logList}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(JSON.stringify(n.data))+" ")]}}])}),n("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),n("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticClass:"avatar",attrs:{src:t.row.avatarUrl}})]}}])}),n("el-table-column",{attrs:{prop:"time",label:"时间"}}),n("el-table-column",{attrs:{prop:"level",label:"等级"},scopedSlots:t._u([{key:"default",fn:function(e){return["error"===e.row.level?n("span",{staticStyle:{color:"red"}},[t._v("ERROR")]):n("span",[t._v(t._s(e.row.level))])]}}])}),n("el-table-column",{attrs:{label:"动作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["log"===i.level?n("div",[i.data.cache?n("span",[t._v(" 打开文章:"+t._s(t.logTypeMap[i.type][i.subType][i.data.cache])+" ")]):"random"===i.subType?n("span",[t._v(" "+t._s(t.logTypeMap[i.type][i.subType][i.data.type])+" ")]):"like"===i.subType?n("span",[t._v(" "+t._s(i.data.liked?"取消赞":"点赞")+"《"+t._s(i.data.title)+"》 ")]):n("span",[t._v(" "+t._s(t.logTypeMap[i.type][i.subType])+" ")])]):t._e()]}}])})],1),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)}),[],!1,null,"1dcc7cca",null);e.default=h.exports},ed08:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("5a0c"),r=n.n(i);function a(t){return r()(t).format("YYYY-MM-DD HH:mm:ss")}}}]);